<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>公寓报修</title>
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="./css/weui.css">
    <link rel="stylesheet" href="./css/weuix.css">
    <script src="./js/zepto.min.js"></script>
    <script src="./js/zepto.weui.js"></script>
    <script src="./js/lrz.min.js"></script>
    <script src="./js/swipe.js"></script>
    <script>
        function textarea(input) {
            var content = $(input);
            var max = content.next().find('i').text();
            var value = content.val();
            if (value.length > 0) {

                value = value.replace(/\n|\r/gi, "");
                var len = value.length;
                content.next().find('span').text(len);
                if (len > max) {
                    content.next().addClass('f-red');
                } else {
                    content.next().removeClass('f-red');
                }
            }
        }

        function cleararea(obj) {
            $(obj).prev().find('.weui-textarea').val("").next().find("span").text(0);
            return false;
        }
        $(function () {

            var tmpl = '<li class="weui-uploader__file" style="background-image:url(#url#)"></li>';
            var $uploaderInput = $("#uploaderInput"); //上传按钮+
            var $uploaderFiles = $("#uploaderFiles");    //图片列表
            var $galleryImg = $(".weui-gallery__img");//相册图片地址
            var $gallery = $(".weui-gallery");
            $uploaderInput.on("change", function (e) {
                var src, url = window.URL || window.webkitURL || window.mozURL, files = e.target.files;
                for (var i = 0, len = files.length; i < len; ++i) {
                    var file = files[i];

                    if (url) {
                        src = url.createObjectURL(file);
                    } else {
                        src = e.target.result;
                    }

                    $uploaderFiles.append($(tmpl.replace('#url#', src)));
                }
            });
            $uploaderFiles.on("click", "li", function () {
                $galleryImg.attr("style", this.getAttribute("style"));
                console.log(this)
                $gallery.fadeIn(100);
            });
            $gallery.on("click", function () {
                $gallery.fadeOut(100);
            });

        });
    </script>
</head>

<body>

    <div class="weui-header bg-white">
        <div class="weui-header-left"> <a href="newindex.html" class="icon icon-109 f-black"></a> </div>  <!-- 头部角标返回首页 -->
        <h1 class="weui-header-title f-black">万和生活+</h1>

    </div>
    <br>
    <div class="page-cells__title" style="color: #666;">公寓报修</div>
    <div class="weui-cells f16">
        <div class="weui-cell " >
            <div class="weui-cell__hd"><label class="weui-label">维修问题</label></div>
            <div class="weui-cell__bd"><input type="text" class="weui-input" placeholder="请输入维修问题"></div>
        </div>

        <div class="weui-cell">
            <div class="weui-cell__hd"><label class="weui-label">宿舍号</label></div>
            <div class="weui-cell__bd">
                <input class="weui-input" pattern="[0-9]*" placeholder="请输入宿舍号" type="number">
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <label class="weui-label">联系方式</label>
            </div>
            <div class="weui-cell__bd">
                <input class="weui-input" placeholder="请输入手机号" type="tel">
            </div>
        </div>
    </div>
    <div class="weui-cells weui-cells_form">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <textarea class="weui-textarea" placeholder="请输入文本" rows="3" onkeyup="textarea(this);"></textarea>
                <div class="weui-textarea-counter"><span>0</span>/<i>300</i></div>
            </div>
            <i class="weui-icon-clear" onclick="cleararea(this)"></i>
        </div>
    </div>
    <div class="page-bd-15">
        <div class="weui-uploader">
            <div class="weui-uploader__hd">
                <p class="weui-uploader__title">上传图片</p>

            </div>
            <div class="weui-uploader__bd">
                <ul class="weui-uploader__files" id="uploaderFiles">
                </ul>
                <div class="weui-uploader__input-box">
                    <input id="uploaderInput" class="weui-uploader__input" accept="image/*" multiple="" type="file">
                </div>
            </div>
        </div>

        <div class="weui-gallery" style="display: none">
            <span class="weui-gallery__img"></span>
            <div class="weui-gallery__opr">
            </div>
        </div>


    </div>

    <div class="weui-btn-area" style="height: 200px;">
        <a class="weui-btn weui-btn_primary" href="./index.html" id="btn">确定</a>  
        <!-- 提交返回首页 -->
    </div>
<!-- 固定底部//可根据首页更改 -->

</body>

</html>
